**移动开发平台API(服务端)**

**当前版本号：V2.2**

1.  **用户二次验证**

    **接口地址: http://unionsdk.haofangame.com/api/checkToken.jhtml**

**通过POST请求**

+:------------:+:-------------:+:---------------------------------------------------------:+
| > **字段名** | > **变量名**  | > **说明**                                                |
+--------------+---------------+-----------------------------------------------------------+
| > token      | > token       | > 用户token（必传，调用注册登陆接口成功后，返回的参数值） |
+--------------+---------------+-----------------------------------------------------------+
| **gamePid**  | > **gamePid** | > gamePid（必传，由平台提供的参数）                       |
+--------------+---------------+-----------------------------------------------------------+
| > userNo     | > userNo      | > userNo (用户唯一标识)                                   |
+--------------+---------------+-----------------------------------------------------------+

**返回参数**

返回数据为Json。其中，code为状态，data为用户名，msg为错误信息。参数格式如：{\"code\":\"100\",\"data\":\"UU1000\",\"msg\":\"校验成功\"}

+:----------------------:+:-------------------------------------------:+
| > **返回值code**       | > **备注**                                  |
+------------------------+---------------------------------------------+
| > \>100                | > 失败                                      |
+------------------------+---------------------------------------------+
| > 100                  | > 成功                                      |
+------------------------+---------------------------------------------+

**二、支付结果通知（get/post方式请都适配）**

**由研发提供回调地址（后台配置）**

+:------------:+:------------------:+:----------------------------------------------------------:+
| > **字段名** | > **变量名**       | > **说明**                                                 |
+--------------+--------------------+------------------------------------------------------------+
| > 订单号     | **orderNo**        | > 此订单号由开发者生成，可用于对账、客服支持等。           |
+--------------+--------------------+------------------------------------------------------------+
| > 玩家帐号   | > userNo           | > 玩家登录成功客户端回传的用户名                           |
+--------------+--------------------+------------------------------------------------------------+
| > 充值金额   | **orderMoney**     | > 订单充值的金额，单位元（只接收 \>=1 的整数位金额）       |
+--------------+--------------------+------------------------------------------------------------+
| > 签名验证   | > flag             | MD5(**orderNo**+userNo+**orderMoney**+PKEY).toUpperCase(); |
+--------------+--------------------+------------------------------------------------------------+
| > 厂家订单号 | **companyOrderNo** | 游戏传入外部订单号                                         |
+--------------+--------------------+------------------------------------------------------------+
| > 游戏PID    | **gamePid**        | 游戏PID                                                    |
+--------------+--------------------+------------------------------------------------------------+
| > 物品id     | **productId**      | 物品id                                                     |
+--------------+--------------------+------------------------------------------------------------+
| > 物品名称   | **productName**    | 物品名称                                                   |
+--------------+--------------------+------------------------------------------------------------+
| > 透传字段   | **remark**         | 非必须不要用                                               |
+--------------+--------------------+------------------------------------------------------------+

> 传递参数字符集统一采用UTF-8

  --------------------- -------------------------------------------------
     **返回值code**     **备注**

          \>100         失败

           100          成功
  --------------------- -------------------------------------------------

> 签名结果为了方便比较，统一转换为大写字符。上述签名验证，"+"该符号不参与签名。
>
> 研发收到通知时，必须给予响应，返回信息只能定义为{\"code\":\"100\",\"data\":\"成功\",\"msg\":\"\"}如开发者无响应，则后台会进入每三分钟一次的补单通知。
>
> 注意：厂商必须对内购id的实际金额和下游传的订单金额进行比较
